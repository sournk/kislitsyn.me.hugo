---
title: 52. AT-ZigZagADX
type: docs
prev: bots
next: 
sidebar:
  open: true
draft: false
publishDate: 2025-04-01
weight: 52
---

Бот торгует по направлению последнего ребра ZigZag-а при подтверждении ADX, WPR и TEMA

* Created by Denis Kislitsyn | denis@kislitsyn.me | [kislitsyn.me](https://kislitsyn.me/personal/algo)
* Version: 1.01-demo

## Что нового?
```
1.01-demo: [*] 'FIL_DID_VAL' теперь проверяет модуль Δ(+DI;-DI)
1.00-demo: Первая версия
```

!!! warning ПРЕДУПРЕЖДЕНИЕ
    1. Торговая стратегия определена клиентом. Автор не несет за нее ответственности.
    2. Бот не гарантирует прибыль.
    3. Бот не гарантирует 100% защиты депозита.
    4. Используйте бота на свой страх и риск.

![Inputs](UM001.%20Inputs.png)

## Стратегия

1. Бот ждет рождения новой свечи.
2. На каждой новой свече бот ищет самые свежие вершины ZigZag-а за `SIG_DPT` свечей назад.
3. Т.е. ZigZag может переносить последнюю вершину после образования нового экстремума, то бот может игнорировать последнюю вершину за `SIG_ZZ_STR` баров.
4. По направлению последнего сегмента ZigZag-а бот определяет ожидаемое направление входа: сверху вниз - BUY; снизу-вверх SELL.
5. Бот ждет подтверждения направления индикаторами:
    - ADX: `+DI>-DI` для BUY или `+DI<-DI` для SELL.

    - TEMA: линия вверх для BUY и вниз для SELL.
6. После получения сигнала бот пытается закрыть позицию в рынке противоположенного направления, если она есть.
7. Бот накладывает фильтры на сигнал для подтверждения входа:
    - WPR: линия вверх для BUY и вниз для SELL.
    - `Δ(+DI;-DI) > FIL_DID_VAL`.
    - `ADX>+DI` для BUY или `ADX>-DI` для SELL.
    - Вход не дальше, чем через `FIL_ZZS_MAX` свечей после вершины ZigZag.
    - Тело свечи входа большем чем `FIL_BBS_MIN` пунктов.
    - Доступного времени торговли.
    - Отсутствия сделки на этом же плече ZigZag-а.
6. При прохождении фильтров бот выполняет вход в позицию.
7. SL за последней вершиной ZigZag-а с доп. отступом.
8. Фиксированный TP может быть установлен в пунктах. 
9. При образовании новой противоположенной вершины ZigZag-а бот выходит из открытой позиции.
10. Одновременно возможна только одна открытая позиция.
12. В фиксированное время бот может закрывать позиции, чтобы избежать свопов. После этого времени входы также игнорируются.
13. В боте реализован трейлинг `EXT_TSL_ENB` при выходе позиции в прибыль. Бот переносит стоп за дальнюю вершину за `EXT_TSL_BAR` баров.


## Установка

1. **Обновите терминал MetaTrader 5 до последней версии:** `Help->Check For Updates->Latest Release Version`. 
    - Если советник или индикатор не запускается, то проверьте сообщения на вкладке `Journal`. Возможно вы не обновили терминал до нужной версии.
    - Иногда для тестирования советников рекомендуется обновить терминал до самой последней бета-версии: `Help->Check For Updates->Latest Beta Version`. На прошлых версиях советник может не запускаться, потому что скомпилирован на последней версии терминала. В этом случае вы увидите сообщения на вкладке `Journal` об этом.
2. **Скопируйте файл бота `*.ex5` в каталог данных** терминала `MQL5\Experts\`. Открыть каталог данных терминала `File->Open Data Folder`.
3. **Скопируйте файл индикаторов `*.ex5` в каталог данных** терминала `MQL5\Indicators\`. Открыть каталог данных терминала `File->Open Data Folder`.
4. **Откройте график нужной пары**.
5. **Переместите советника из окна `Навигатор` на график**.
6. **Установите в настройках бота галочку `Allow Auto Trading`**.
7. **Включите режим автоторговли** в терминале, нажав кнопку `Algo Trading` на главной панели инструментов.

## Inputs

##### 1. СИГНАЛ (SIG)
- [x] `SIG_DPT`: Глубина поиска сигнала, баров
- [x] `SIG_ZZ_DPT`: ZigZag Depth
- [x] `SIG_ZZ_DPT`: ZigZag Deviation
- [x] `SIG_ZZ_DPT`: ZigZag Back Step
- [x] `SIG_ZZ_STR`: ZigZag Игнорировать вершины до бара
- [x] `SIG_ADX_PER`: ADX Period
- [x] `SIG_TEM_PER`: TEMA Period
- [x] `SIG_WPR_PER`: WPR Period

##### 2. ФИЛЬТР (FIL)
- [x] `FIL_WPR_ENB`: Фильтр по направлению WPR включен
- [x] `FIL_DID_VAL`: Фильтр по значению Δ(+DI;-DI) (<=0.0-откл) 
- [x] `FIL_ADX_ENB`: Фильтр ADX<DI 
- [x] `FIL_ZZS_MAX`: Фильтр макс. кол-ва баров после ZZ (0-откл) 
- [x] `FIL_BBS_MIN`: Фильтр мин. размера тела бара, пункт (0-откл)

##### 3. ВХОД (ENT)
- [x] `ENT_LTP`: Тип лота
- [x] `ENT_LTV`: Значение для расчета лота
- [x] `ENT_SL_SHT_PER`: Сдвиг SL (0-откл), % от цены (DEPRECATED in 1.01)
- [x] `ENT_SL_SHT_PNT`: Сдвиг SL (0-откл), пункт
- [x] `ENT_TP_PNT`: Fixed TP, pnt (0-откл)

##### 4. ВЫХОД (EXT)
- [x] `EXT_REV_MOD`: ==Режим выхода по развороту:==
    - [x] `Отключен`: Выход из позиции при развороте не происходит, только по TP/SL или TSL
    - [x] `После новой вершины ZigZag-a`: Выход из позиции сразу после появления новой вершины ZigZag
    - [x] `После нового сигнала`: Выход из позиции сразу после нового сигнала
- [x] `EXT_TSL_ENB`: Trailing Stop включен
- [x] `EXT_TSL_BAR`: Trailing Stop на хай/лоу за N баров
- [x] `EXT_TIM`: Выход после наступления времени (""-откл)

##### 5. ГРАФИКА (GUI)
- [x] `GUI_ENB`: Графика сигналов и входов включена
- [x] `GUI_TSL_ENB`: ==Рисовать уровень TSL==
- [x] `GUI_TSL_CLR`: ==Цвет линии уровня TSL==
- [x] `GUI_TSL_WDT`: ==Толщина линии уровня TSL==

##### 6. РАЗНОЕ (MS)
- [x] `MS_MGC`: Expert Adviser ID - Magic
- [x] `MS_EGP`: Expert Adviser Global Prefix
- [x] `MS_LOG_LL`: Log Level
- [x] `MS_LOG_FI`: Log Filter IN String (use `;` as sep)
- [x] `MS_LOG_FO`: Log Filter OUT String (use `;` as sep)
- [x] `MS_COM_EN`: Comment Enable (turn off for fast testing)
- [x] `MS_COM_IS`: Comment Interval, Sec
- [x] `MS_COM_EW`: Comment Custom Win
